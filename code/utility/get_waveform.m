function wf_bitstream = get_waveform(g, bitstream)
% get_waveform: Getting the waveform as bit stream of the size -
% size(g)*20*bitstream_size
	% Usage: wf_bitstream = get_waveform(g, frames)
	% Input Args: 
    %             g: C/A code generated by cacode.m script
	%             fr_bitstream_matrix: a matrix containing the frames bitstream 
    
    %% g_ is C/A code message concatenated 1000/50 = 20 to match a single NAV message bit 
    g_ = repmat(g,1,20);
    
    %% init empty waveform bitstream
    wf = zeros(1, length(g_)*length(bitstream));
    
    %% for each frame, we will run on all message bits and for each bit we  
    % will preform xor(g_, current_bit) and concat to wf
    for i = 1:length(bitstream)
        start_ind = (i-1)*length(g_)+1;
        end_ind = start_ind+length(g_)-1;
        wf(start_ind:end_ind) = xor(g_,bitstream(i));
    end
    
    %% send waveform as bitstream (0,1 values, before upsampling and not yet converted to analog values)
    wf_bitstream = wf;
end